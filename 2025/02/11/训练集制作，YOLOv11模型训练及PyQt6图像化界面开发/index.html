<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>使用labelimg制作训练集，YOLOv11模型训练得到权重文件及PyQt6图像化界面开发。实现物品自动识别及统计信息 | 张hr的博客</title><meta name="author" content="zhr"><meta name="copyright" content="zhr"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="date: 2025-02-11 19:52:04tags:-相关内容 一，使用labelimg制作数据集1.anoconda虚拟环境下使用 pip install labelimg 安装labelimg工具输入labelimg打开软件，接下来可以对图片进行标志并生成相关格式标签文件 2.数据集文件夹包含以下3类文件 class相关类名image文件夹里是划分好的train集和val集lable">
<meta property="og:type" content="article">
<meta property="og:title" content="使用labelimg制作训练集，YOLOv11模型训练得到权重文件及PyQt6图像化界面开发。实现物品自动识别及统计信息">
<meta property="og:url" content="https://zhr-1028.github.io/zhr-1028.github.io/2025/02/11/%E8%AE%AD%E7%BB%83%E9%9B%86%E5%88%B6%E4%BD%9C%EF%BC%8CYOLOv11%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E5%8F%8APyQt6%E5%9B%BE%E5%83%8F%E5%8C%96%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/index.html">
<meta property="og:site_name" content="张hr的博客">
<meta property="og:description" content="date: 2025-02-11 19:52:04tags:-相关内容 一，使用labelimg制作数据集1.anoconda虚拟环境下使用 pip install labelimg 安装labelimg工具输入labelimg打开软件，接下来可以对图片进行标志并生成相关格式标签文件 2.数据集文件夹包含以下3类文件 class相关类名image文件夹里是划分好的train集和val集lable">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zhr-1028.github.io/zhr-1028.github.io/img/butterfly-icon.png">
<meta property="article:published_time" content="2025-02-11T11:52:04.735Z">
<meta property="article:modified_time" content="2025-02-11T14:05:42.898Z">
<meta property="article:author" content="zhr">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhr-1028.github.io/zhr-1028.github.io/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "使用labelimg制作训练集，YOLOv11模型训练得到权重文件及PyQt6图像化界面开发。实现物品自动识别及统计信息",
  "url": "https://zhr-1028.github.io/zhr-1028.github.io/2025/02/11/%E8%AE%AD%E7%BB%83%E9%9B%86%E5%88%B6%E4%BD%9C%EF%BC%8CYOLOv11%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E5%8F%8APyQt6%E5%9B%BE%E5%83%8F%E5%8C%96%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/",
  "image": "https://zhr-1028.github.io/zhr-1028.github.io/img/butterfly-icon.png",
  "datePublished": "2025-02-11T11:52:04.735Z",
  "dateModified": "2025-02-11T14:05:42.898Z",
  "author": [
    {
      "@type": "Person",
      "name": "zhr",
      "url": "https://zhr-1028.github.io/zhr-1028.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://zhr-1028.github.io/zhr-1028.github.io/2025/02/11/%E8%AE%AD%E7%BB%83%E9%9B%86%E5%88%B6%E4%BD%9C%EF%BC%8CYOLOv11%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E5%8F%8APyQt6%E5%9B%BE%E5%83%8F%E5%8C%96%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '使用labelimg制作训练集，YOLOv11模型训练得到权重文件及PyQt6图像化界面开发。实现物品自动识别及统计信息',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">张hr的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">使用labelimg制作训练集，YOLOv11模型训练得到权重文件及PyQt6图像化界面开发。实现物品自动识别及统计信息</span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">使用labelimg制作训练集，YOLOv11模型训练得到权重文件及PyQt6图像化界面开发。实现物品自动识别及统计信息</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-02-11T11:52:04.735Z" title="发表于 2025-02-11 19:52:04">2025-02-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-02-11T14:05:42.898Z" title="更新于 2025-02-11 22:05:42">2025-02-11</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><hr>
<p>date: 2025-02-11 19:52:04<br>tags:<br>-相关内容</p>
<h2 id="一，使用labelimg制作数据集"><a href="#一，使用labelimg制作数据集" class="headerlink" title="一，使用labelimg制作数据集"></a>一，使用labelimg制作数据集</h2><p>1.anoconda虚拟环境下使用 <code>pip install labelimg </code>安装labelimg工具输入labelimg打开软件，接下来可以对图片进行标志并生成相关格式标签文件</p>
<p>2.数据集文件夹包含以下3类文件<br><img src="/../image/7.png"></p>
<p>class相关类名<br>image文件夹里是划分好的train集和val集<br>lable文件夹里也是划分好的train集和val集</p>
<h2 id="二，YOLOv11训练模型"><a href="#二，YOLOv11训练模型" class="headerlink" title="二，YOLOv11训练模型"></a>二，YOLOv11训练模型</h2><p>1.可以anoconda搭载好环境包含ultralytics,python版本不能较老，集安装好pytorch,电脑有gpu可以下gpu版本训练快很多<br>1.在github官网下载对应版本ultralytics及yolov11n.pt文件<br>用pycharm等打开ultralytics项目</p>
<p>2.yaml中填写好相关路径<br><img src="/../image/8.png"></p>
<p>3.创建train.py文件写训练代码如<br><img src="/../image/9.png"></p>
<p>4.运行代码，等待训练结束<br>生成的runs文件夹里含训练出的模型权重文件best.pt</p>
<h2 id="三，PyQt6开发界面及编写代码"><a href="#三，PyQt6开发界面及编写代码" class="headerlink" title="三，PyQt6开发界面及编写代码"></a>三，PyQt6开发界面及编写代码</h2><p>1.搭载好pyqt6及pyqt6-tools环境</p>
<p>2.打开QTdesiger设计<br>包含两个pushButton组件分别实现文件上传功能及电脑摄像头开关功能<br>objectName分别为uploadButton，cameraButton（代码中会引用这些属性）<br>一个Qtextedit组件objectName：statusTextEdit来呈现统计信息<br>一个Qlabel组件，objectName：resultLabel展示图片或视频标注结果<br>可用一些设计美化界面<br><img src="/../image/10.png"></p>
<h2 id="四，代码"><a href="#四，代码" class="headerlink" title="四，代码"></a>四，代码</h2><p>1.所需相关模块<br>import sys ：sys.argv：用于获取命令行参数，在 QApplication(sys.argv) 中，将命令行参数传递给 QApplication<br>sys.exit(app.exec())：用于在应用程序结束时退出 Python 解释器</p>
<p>import cv2 ：cv2.VideoCapture：用于打开视频文件或摄像头设备，如 cv2.VideoCapture(self.file_path) 用于打开视频文件，cv2.VideoCapture(0) 用于打开默认摄像头。<br>cap.read()：从视频文件或摄像头中读取一帧图像。</p>
<p>from ultralytics import YOLO ：self.model &#x3D; YOLO(‘best.pt’) 加载了YOLO 模型，对图像和视频帧进行目标检测，如 results &#x3D; self.model(frame)。</p>
<p>from PyQt6 import uic：加载 QtDesigner 创建的 UI 文件。在代码中，uic.loadUi(‘task3.ui’, self) 加载名为 task3.ui 的 UI 文件到 MainWindow 类中。</p>
<p>from PyQt6.QtWidgets import QApplication, QWidget, QFileDialog<br>QApplication：应用程序的控制和设置<br>QWidget：用于创建自定义的窗口界面，MainWindow类继承自QWidget<br>QFileDialog：实现打开文件功能，连接pushbutton</p>
<p>from PyQt6.QtGui import QPixmap, QImage<br>QPixmap:显示图像 （QLabel）<br>QImage:处理和操作图像数据</p>
<p>from PyQt6.QtCore import QThread, pyqtSignal<br>QThread：QThread 创建多线程，我创建了VideoThread 和 CameraThread ，继承于QThread，在后台处理视频和摄像头数据。<br> pyqtSignal：不同线程之间传递信号，frame_processed &#x3D; pyqtSignal(object, object) 定义了一个信号，用于传递处理后的帧和统计信息。</p>
<p> from PyQt6.QtCore import QResource：运行二进制资源文件，<br> 我使用了.qrc文件提供图片，<code>$ &quot;相关路径\Lib\site-packages\qt6_applications\Qt\bin\rcc.exe&quot; &quot;-binary&quot; &quot;1.qrc&quot; &quot;-o&quot; &quot;1.rcc&quot;</code>命令把.qrc编译成二进制<br>  <code>QResource.registerResource(&#39;.rcc&#39;)</code>代码实现图片展示功能</p>
<p>2.相关类<br>VideoThread<br>pythonclass VideoThread(QThread):<br>    frame_processed &#x3D; pyqtSignal(object, object)<br>    def <strong>init</strong>(self, file_path, model):<br>        …<br>    def reset_counts(self):<br>        …<br>    def run(self):<br>        …<br>    def stop(self):<br>        …<br>继承自 QThread，用于在后台处理视频文件。其主要功能包括：<br>初始化时接收视频文件路径和 YOLO 模型。<br>run 方法会逐帧读取视频文件，使用 YOLO 模型进行目标检测，统计目标数量，并通过 frame_processed 信号将处理后的帧和统计信息发送出去。<br>stop 方法用于停止线程的运行。<br>CameraThread<br>class CameraThread(QThread):<br>    frame_processed &#x3D; pyqtSignal(object, object)<br>    def <strong>init</strong>(self, model):<br>        …<br>    def reset_counts(self):<br>        …<br>    def run(self):<br>        …<br>    def stop(self):<br>        …<br>继承自 QThread，用于处理摄像头的实时视频流</p>
<p>run 方法会逐帧读取视频文件，使用 YOLO 模型进行目标检测，统计目标数量，并通过 frame_processed 信号将处理后的帧和统计信息发送出去。<br>stop 方法用于停止线程的运行</p>
<p>3.主窗口class MainWindow(QWidget):<br>def <strong>init</strong>(self):<br>        …</p>
<p>def openfile(self):<br>        …</p>
<p>def process_image(self, file_path):<br>        …</p>
<p>def process_video(self, file_path):<br>        …</p>
<p>def update_frame(self, annotated_frame, status_text):<br>        …</p>
<p>def toggle_camera(self):<br>        …</p>
<p>def closeEvent(self, event):<br>        …<br>继承自 QWidget：<strong>init</strong> 方法：加载 UI 连接按钮的点击事件<br>openfile方法：打开文件选择界面<br>process_image 方法：对用户选择的图像文件进行目标检测，将检测结果显示在界面上，并更新统计信息。<br>process_video 方法：停止之前的视频处理线程和摄像头线程，创建并启动新的视频处理线程。<br>update_frame方法：接收处理后的帧和统计信息：切换摄像头的启动和停止状态<br>closeEvent 方法：在关闭窗口时停止所有正在运行的线程。</p>
<p>4.主程序<br>if <strong>name</strong> &#x3D;&#x3D; ‘<strong>main</strong>‘:<br>    app &#x3D; QApplication(sys.argv)<br>    window &#x3D; MainWindow()<br>    window.show()<br>    sys.exit(app.exec())</p>
<h2 id="五，功能展示"><a href="#五，功能展示" class="headerlink" title="五，功能展示"></a>五，功能展示</h2><p><img src="/../image/11.png" alt="一些文件"></p>
<p><img src="/../image/12.png" alt="一些文件"></p>
<h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><pre><code class="import">import warnings
import cv2
from PyQt6 import uic
from PyQt6.QtWidgets import QApplication, QWidget, QFileDialog
from PyQt6.QtGui import QPixmap, QImage
from PyQt6.QtCore import QThread, pyqtSignal
from ultralytics import YOLO
from PyQt6.QtCore import QResource
warnings.filterwarnings(&quot;ignore&quot;, category=DeprecationWarning)  # 忽略警告

class VideoThread(QThread):
    frame_processed = pyqtSignal(object, object)  # 信号：传递处理后的帧和统计信息
    def __init__(self, file_path, model):
        super().__init__()
        self.file_path = file_path
        self.model = model
        self.reset_counts()
        self.running = True

    def reset_counts(self):
        #重置目标数量统计信息
        self.class_counts = &#123;&#125;

    def run(self):
        self.reset_counts()
        cap = cv2.VideoCapture(self.file_path)
        if not cap.isOpened():
            print(&quot;Failed to open video file&quot;)
            return
        while self.running:
            ret, frame = cap.read()
            if not ret:
                break

            results = self.model(frame)
            annotated_frame = results[0].plot()  # 绘制检测结果
            # 目标统计
            class_names = results[0].names
            self.class_counts = &#123;&#125;  # 重置统计信息
            for cls in results[0].boxes.cls.cpu().numpy():
                cls_name = class_names[int(cls)]
                if cls_name in self.class_counts:
                    self.class_counts[cls_name] += 1
                else:
                    self.class_counts[cls_name] = 1
            status_text = &quot;\n&quot;.join([f&quot;&#123;name&#125;: &#123;count&#125;&quot; for name, count in self.class_counts.items()])

            self.frame_processed.emit(annotated_frame, status_text)  # 发送处理后的帧和统计信息
            self.msleep(30)  # 每 30 毫秒处理一帧

        cap.release()

    def stop(self):
        self.running = False
        self.wait()


class CameraThread(QThread):
    frame_processed = pyqtSignal(object, object)  # 信号：传递处理后的帧和统计信息

    def __init__(self, model):
        super().__init__()
        self.model = model
        self.reset_counts()
        self.running = True

    def reset_counts(self):
        self.class_counts = &#123;&#125;

    def run(self):
        self.reset_counts()
        cap = cv2.VideoCapture(0)
        if not cap.isOpened():
            print(&quot;Failed to open camera&quot;)
            return
        print(&quot;Camera opened successfully&quot;)
        while self.running:
            ret, frame = cap.read()
            if not ret:
                break

            results = self.model(frame)
            annotated_frame = results[0].plot()  # 绘制检测结果
            class_names = results[0].names
            self.class_counts = &#123;&#125;  # 重置统计信息
            for cls in results[0].boxes.cls.cpu().numpy():
                cls_name = class_names[int(cls)]
                if cls_name in self.class_counts:
                    self.class_counts[cls_name] += 1
                else:
                    self.class_counts[cls_name] = 1
            status_text = &quot;\n&quot;.join([f&quot;&#123;name&#125;: &#123;count&#125;&quot; for name, count in self.class_counts.items()])

            self.frame_processed.emit(annotated_frame, status_text)  # 发送处理后的帧和统计信息
            self.msleep(30)  # 每 30 毫秒处理一帧
        cap.release()

    def stop(self):
        self.running = False
        self.wait()


class MainWindow(QWidget):
    def __init__(self):
        super().__init__()
        uic.loadUi(&#39;task3.ui&#39;, self)# 加载 UI 文件
        self.model = YOLO(&#39;best.pt&#39;)
        self.uploadButton.clicked.connect(self.openfile)
        self.cameraButton.clicked.connect(self.toggle_camera)  # 新增摄像头按钮点击事件
        self.video_thread = None  # 视频处理线程
        self.camera_thread = None  # 摄像头处理线程
        self.camera_running = False  # 摄像头是否正在运行的标志

    def openfile(self):
        if self.camera_thread and self.camera_running:
            self.toggle_camera()  # 停止摄像头
        file_path, _ = QFileDialog.getOpenFileName(self, &#39;选择文件&#39;, &#39;&#39;,
                                                   &#39;图片和视频文件 (*.jpg *.png *.mp4 *.webp *.wmv *.bmp *.jpeg *.gif *.avi *.mkv *.flv *.rmvb *.tiff *.mov *.m4v *.3gp *.jfif *.heic)&#39;)
        if file_path:
            # 定义图片文件扩展名元组，添加新的扩展名
            image_extensions = (&#39;.jpg&#39;, &#39;.png&#39;, &#39;.webp&#39;, &#39;.bmp&#39;, &#39;.jpeg&#39;, &#39;.gif&#39;, &#39;.tiff&#39;, &#39;.jfif&#39;, &#39;.heic&#39;)
            # 定义视频文件扩展名元组，添加新的扩展名
            video_extensions = (&#39;.mp4&#39;, &#39;.wmv&#39;, &#39;.avi&#39;, &#39;.mkv&#39;, &#39;.flv&#39;, &#39;.rmvb&#39;, &#39;.mov&#39;, &#39;.m4v&#39;, &#39;.3gp&#39;)
            if file_path.lower().endswith(image_extensions):
                self.process_image(file_path)
            elif file_path.lower().endswith(video_extensions):
                self.process_video(file_path)

    def process_image(self, file_path):
        results = self.model(file_path)
        annotated_frame = results[0].plot()
        height, width, channel = annotated_frame.shape
        bytes_per_line = 3 * width
        q_img = QImage(annotated_frame.data, width, height, bytes_per_line, QImage.Format.Format_BGR888)
        pixmap = QPixmap.fromImage(q_img)
        self.resultLabel.setPixmap(pixmap.scaled(self.resultLabel.width(), self.resultLabel.height()))

        class_names = results[0].names  # 统计信息
        class_counts = &#123;&#125;
        for cls in results[0].boxes.cls.cpu().numpy():
            cls_name = class_names[int(cls)]
            if cls_name in class_counts:
                class_counts[cls_name] += 1
            else:
                class_counts[cls_name] = 1
        status_text = &quot;\n&quot;.join([f&quot;&#123;name&#125;: &#123;count&#125;&quot; for name, count in class_counts.items()])
        self.statusTextEdit.setPlainText(status_text)

    def process_video(self, file_path):
        if self.video_thread:
            self.video_thread.stop()  # 停止上一个线程
        if self.camera_thread and self.camera_running:
            self.toggle_camera()  # 停止摄像头

        # 创建并启动视频处理线程
        self.video_thread = VideoThread(file_path, self.model)
        self.video_thread.frame_processed.connect(self.update_frame)
        self.video_thread.start()

    def update_frame(self, annotated_frame, status_text):
        try:
            height, width, channel = annotated_frame.shape# 将 OpenCV 帧转换为 QImage
            bytes_per_line = 3 * width
            q_img = QImage(annotated_frame.data, width, height, bytes_per_line, QImage.Format.Format_BGR888)
            pixmap = QPixmap.fromImage(q_img)  # 将 QImage 转换为 QPixmap 并显示
            if pixmap.isNull():
                print(&quot;Pixmap is null!&quot;)
            else:
                self.resultLabel.setPixmap(pixmap.scaled(self.resultLabel.width(), self.resultLabel.height()))
            self.statusTextEdit.setPlainText(status_text)
        except Exception as e:
            print(f&quot;Error updating frame: &#123;e&#125;&quot;)

    def toggle_camera(self):
        if self.camera_running:
            # 停止摄像头
            self.camera_thread.stop()
            self.camera_thread = None
            self.camera_running = False
            self.cameraButton.setText(&quot;启动摄像头&quot;)
        else:
            # 启动摄像头
            if self.video_thread:
                self.video_thread.stop()  # 停止视频处理线程
            self.camera_thread = CameraThread(self.model)
            self.camera_thread.frame_processed.connect(self.update_frame)
            self.camera_thread.start()
            self.camera_running = True
            self.cameraButton.setText(&quot;停止摄像头&quot;)

    def closeEvent(self, event):     #关闭窗口时停止所有线程
        if self.video_thread:
            self.video_thread.stop()
        if self.camera_thread:
            self.camera_thread.stop()
        event.accept()

if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    window = MainWindow()
    QResource.registerResource(&#39;1.rcc&#39;)
    window.show()
    sys.exit(app.exec())```
</code></pre>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://zhr-1028.github.io/zhr-1028.github.io">zhr</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://zhr-1028.github.io/zhr-1028.github.io/2025/02/11/%E8%AE%AD%E7%BB%83%E9%9B%86%E5%88%B6%E4%BD%9C%EF%BC%8CYOLOv11%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E5%8F%8APyQt6%E5%9B%BE%E5%83%8F%E5%8C%96%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/">https://zhr-1028.github.io/zhr-1028.github.io/2025/02/11/%E8%AE%AD%E7%BB%83%E9%9B%86%E5%88%B6%E4%BD%9C%EF%BC%8CYOLOv11%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E5%8F%8APyQt6%E5%9B%BE%E5%83%8F%E5%8C%96%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://zhr-1028.github.io/zhr-1028.github.io" target="_blank">张hr的博客</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/01/25/hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/" title="如何利用hexo框架在github上搭建个人博客"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">如何利用hexo框架在github上搭建个人博客</div></div><div class="info-2"><div class="info-item-1"> date: 2025-01-25 18:16:22tags:-博客搭建-Hexo 一，相关软件的安装与准备工作1.用qq邮箱等注册Github账号，并创建仓库 仓库命名需要使用github一样的名字并加上.github.io(如果你叫aaa则命名为aaa.github.io)并公开仓库 2.安装git ,hexo部署时需要用到，网址如下https://git-scm.com/ 3，安装node  网址https://nodejs.org/然后将整个文件夹配置到系统环境变量 二,Hexo的相关操作创建一个文件夹如blog,进入文件夹，然后右键点击git bash here 执行以下代码安装hexo npm install -g hexo-cli查看是否安装成功hexo -v 初始化命令hexo...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">zhr</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%EF%BC%8C%E4%BD%BF%E7%94%A8labelimg%E5%88%B6%E4%BD%9C%E6%95%B0%E6%8D%AE%E9%9B%86"><span class="toc-number">1.</span> <span class="toc-text">一，使用labelimg制作数据集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%EF%BC%8CYOLOv11%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.</span> <span class="toc-text">二，YOLOv11训练模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%EF%BC%8CPyQt6%E5%BC%80%E5%8F%91%E7%95%8C%E9%9D%A2%E5%8F%8A%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81"><span class="toc-number">3.</span> <span class="toc-text">三，PyQt6开发界面及编写代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%EF%BC%8C%E4%BB%A3%E7%A0%81"><span class="toc-number">4.</span> <span class="toc-text">四，代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%EF%BC%8C%E5%8A%9F%E8%83%BD%E5%B1%95%E7%A4%BA"><span class="toc-number">5.</span> <span class="toc-text">五，功能展示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81"><span class="toc-number">6.</span> <span class="toc-text">完整代码</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/02/11/%E8%AE%AD%E7%BB%83%E9%9B%86%E5%88%B6%E4%BD%9C%EF%BC%8CYOLOv11%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E5%8F%8APyQt6%E5%9B%BE%E5%83%8F%E5%8C%96%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/" title="使用labelimg制作训练集，YOLOv11模型训练得到权重文件及PyQt6图像化界面开发。实现物品自动识别及统计信息">使用labelimg制作训练集，YOLOv11模型训练得到权重文件及PyQt6图像化界面开发。实现物品自动识别及统计信息</a><time datetime="2025-02-11T11:52:04.735Z" title="发表于 2025-02-11 19:52:04">2025-02-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/01/25/hexo%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/" title="如何利用hexo框架在github上搭建个人博客">如何利用hexo框架在github上搭建个人博客</a><time datetime="2025-01-25T10:16:22.871Z" title="发表于 2025-01-25 18:16:22">2025-01-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/01/25/hello-world/" title="Hello World">Hello World</a><time datetime="2025-01-25T06:53:24.125Z" title="发表于 2025-01-25 14:53:24">2025-01-25</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By zhr</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>